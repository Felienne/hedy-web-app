{% extends "auth.html" %}

{% block main %}
<div class="px-8">
    <h2>{{auth.customize_class}}: {{class_info.name}}</h2>
    <div class="flex flex-col">
        <h3>Algemene instellingen</h3>
        <div>
            <div class="flex flex-col w-full border border-gray-400 py-2 px-4 rounded-lg">
                <div class="flex flex-row">
                    <div>
                        <label class="inline-block w-40">Programmeermodus</label>
                        <input class="attribute inline-block ltr:ml-0 ltr:mr-3 rtl:mr-0 rtl:ml-3" type="checkbox" id="username" name="username">
                    </div>
                    <div>
                        <label class="inline-block w-40">Ontdekken pagina</label>
                        <input class="attribute inline-block ltr:ml-0 ltr:mr-3 rtl:mr-0 rtl:ml-3" type="checkbox" id="username" name="username">
                    </div>
                    <div>
                        <label class="inline-block w-40">Openbaar profiel</label>
                        <input class="attribute inline-block ltr:ml-0 ltr:mr-3 rtl:mr-0 rtl:ml-3" type="checkbox" id="username" name="username">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="flex flex-col">
        <h3>Level selecteren</h3>
        <div class="flex flex-row flex-wrap items-center w-full border border-gray-400 py-2 px-4 rounded-lg">
            {% for i in range(1, max_level + 1) %}
                <label class="inline-block w-24" for="{{ i }}">Level {{ i }}</label>
                <input class="inline-block ltr:ml-0 ltr:mr-3 rtl:mr-0 rtl:ml-3 level_selector" level="{{ i }}" type="checkbox">
            {% endfor %}
        </div>
    </div>
    <div class="flex flex-col">
        <h3>Avonturen selecteren</h3>
        <div class="border border-gray-400 py-2 px-4 rounded-lg">
            <table class="table-auto w-full text-center customize_adventure_overview">
                <thead>
                    <tr>
                        <th class="w-40 text-left">Adventure</th>
                        {% for i in range(1, max_level + 1) %}
                            <th class="w-12">{{ i }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for key, adventure in adventures.items() %}
                     <tr>
                        {% for name, levels in adventure.items() %}
                            <td class="text-left">{{ name }}</td>
                            {% for i in range(1, max_level + 1) %}
                                <td><input class="adventure_level_{{ loop.index }}" adventure="{{ key }}" level="{{ i }}" type="checkbox" {% if i not in levels %}disabled{% endif %}></td>
                            {% endfor %}
                        {% endfor %}
                     </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
     <div class="mt-4">
         <button class="blue-btn" onclick="hedyApp.save_customizations ('{{class_info.id}}')">{{auth.save}}</button>
         <button class="red-btn" onclick="hedyApp.reset_level_preferences (level)">{{auth.reset}}</button>
     </div>
    <div class="mt-4">
        <button class="green-btn" onclick="window.location.href = '/for-teachers/class/{{class_info.id}}'">{{auth.back_to_class}}</button>
    </div>
</div>
<script>
$(document).ready(function() {
    $('.level_selector').change(function() {
        const level = $(this).attr('level');
        if (this.checked) {
            $('.adventure_level_' + level).each(function(){
                if ($(this).is(':enabled')) {
                    this.checked = true;
                }
            });
        } else {
            $('.adventure_level_' + level).each(function(){
                this.checked = false;

            });
        }
    });
});
</script>
{% endblock %}