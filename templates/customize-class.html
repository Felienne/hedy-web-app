{% extends "auth.html" %}

{% block main %}
<div class="px-8">
    <h2>{{auth.customize_class}}: {{class_info.name}}</h2>
    <div class="w-full ltr:pr-4 rtl:pl-4">
        Hoi! Hier kun je jouw klas personaliseren. Door het selecteren van levels en avonturen kun je kiezen wat jouw leerlingen kunnen zien.
        Ook kun je jouw zelfgemaakte avonturen aan levels toevoegen. <b>Let op:</b> Niet elk avontuur is voor elk level beschikbaar! Het instellen gaat als volgt:
        <div class="border border-gray-400 w-3/4 rounded-lg px-2 py-1 my-2">
            <ol>
                <li>Selecteer de levels voor jouw klas</li>
                    <ul class="mt-0 pt-0">
                        <li>Er verschijnen "checkboxes" voor de beschikbare avonturen voor deze levels</li>
                    </ul>
                <li>Selecteer de avonturen die je beschikbaar wilt maken</li>
                    <ul class="mt-0 pt-0">
                        <li>Klik op de naam van een avontuur om deze voor alle levels te selecteren</li>
                    </ul>
                <li>Voeg eventueel persoonlijke avonturen toe</li>
                <li>Kies "opslaan" -> je bent helemaal klaar!</li>
            </ol>
        </div>
        Je kunt deze instellingen altijd op een later moment wijzigen. Zo kun je bijvoorbeeld tijdens het les geven nieuwe avonturen of levels beschikbaar maken.
        Hierdoor is het voor leerlingen (en voor de leraar!) makkelijker om te kiezen waar aan gewerkt kan worden en wat er geleerd wordt.
        Als je alles beschikbaar wilt maken voor jouw klas kun je het beste de "personalisatie" verwijderen, doe dit met de "verwijder" knop beneden in het scherm.
    </div>
    <div class="flex flex-col">
        <h3>Levels selecteren</h3>
        <div class="flex flex-col flex-wrap h-24 border border-gray-400 px-4 pt-2 rounded-lg">
            {% for i in range(1, max_level + 1) %}
                <div class="flex flex-row items-center">
                    <label class="inline-block w-24" for="{{ i }}">Level {{ i }}</label>
                    <input class="inline-block ltr:ml-0 ltr:mr-3 rtl:mr-0 rtl:ml-3 level_selector" level="{{ i }}" {% if customizations and i in customizations['levels'] %}checked{% endif %} type="checkbox">
                </div>
            {% endfor %}
        </div>
    </div>
    <div class="flex flex-col">
        <h3>Avonturen selecteren</h3>
        <div class="border border-gray-400 py-2 px-4 rounded-lg">
            <table class="table-auto w-full text-center customize_adventure_overview">
                <thead>
                    <tr>
                        <th class="w-40 text-left border-r border-gray-400">Adventure / Level</th>
                        {% for i in range(1, max_level + 1) %}
                            <th class="w-12">{{ i }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for key, adventure in adventures.items() %}
                     <tr>
                        {% for name, levels in adventure.items() %}
                            <td class="text-left adventure_keys border-t border-r border-gray-400 cursor-pointer" onclick="hedyApp.select_all_levels_adventure('{{ key }}');" adventure="{{ key }}">{{ name }}</td>
                            {% for i in range(1, max_level + 1) %}
                                <td class="border-t border-gray-400">
                                    {% if i in levels %}<input class="adventure_level_{{ loop.index }} adventure_level_input
                                        {% if not customizations or i not in customizations['levels'] %}hidden{% endif %}"
                                        adventure="{{ key }}" level="{{ i }}"
                                        {% if customizations and customizations['adventures'][key] and i in customizations['adventures'][key] %}
                                            checked
                                        {% endif %} type="checkbox">
                                    {% endif %}
                                </td>
                            {% endfor %}
                        {% endfor %}
                     </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
     <div class="mt-4 flex flex-row">
         <button class="blue-btn ltr:mr-4 rtl:ml-4" onclick="hedyApp.save_customizations('{{class_info.id}}')">{{auth.save}}</button>
         <button class="yellow-btn text-white" onclick="$('.adventure_level_input').prop('checked', false);">Reset alle avonturen</button>
         <button class="red-btn ltr:ml-auto rtl:mr-auto {% if not customizations %}hidden{% endif %}" id="remove_customizations_button" onclick="hedyApp.remove_customizations('{{class_info.id}}')">Verwijder personalisatie</button>
     </div>
    <div class="mt-4">
        <button class="green-btn" onclick="window.location.href = '/for-teachers/class/{{class_info.id}}'">{{auth.back_to_class}}</button>
    </div>
</div>
{% endblock %}