{% extends "auth.html" %}

{% block main %}
<div class="px-8">
    <h2>{{auth.customize_class}}: {{class_info.name}}</h2>
    <div class="mt-4 w-full" id="explanation_text">
        Kies een level en selecteer vervolgens de mogelijkheden die je wilt voor bovenstaande klas.
        Het is mogelijk om per level specifieke "adventures" te selecteren die beschikbaar zijn voor de studenten.
        Ook is er een optie om een restrictie te zetten op het aantal "example programs" dat de studenten kunnen gebruiken.
        Na het bereiken van de limiet zullen deze automatisch verdwijnen.
        Daarnaast kun je instellen hoeveel correcte programma's er nodig zijn voordat het volgende level beschikbaar komt.
        Of een level compleet verbergen.
    </div>
    <div class="mt-4" id="customize_level_button_container">
        <button class="green-btn mr-4" id="test" level="1">Level 1</button>
        <button class="green-btn mr-4" level="2">Level 2</button>
        <button class="green-btn mr-4" level="3">Level 3</button>
        <button class="green-btn mr-4" level="4">Level 4</button>
        <button class="green-btn mr-4" level="5">Level 5</button>
        <button class="green-btn mr-4" level="6">Level 6</button>
        <button class="green-btn mr-4" level="7">Level 7</button>
        <button class="green-btn mr-4" level="8">Level 8</button>
        <button class="green-btn mr-4" level="9">Level 9</button>
        <button class="green-btn mr-4" level="10">Level 10</button>
    </div>
    <!--
    This is where the magic happens, when a user presses a level button retrieve the corresponding info from the db
    Then update the info when the corresponding button is pressed.
    It would be best to store this js functionality in in teachers.ts
    But, for now we can store it below (temporary!)
    -->
    <div class="mt-4 border-gray-400 border-2 pb-4 px-4" id="level_settings">
        <h3 class="mt-4" id="settings_header">Voorkeuren level 1</h3>
        <div class="mt-4 flex flex-row">
            <div class="mr-4 w-1/2" id="adventure_selector">
                <h4>Welke avonturen wil je beschikbaar maken?</h4>
                <form>
                    <div class="flex flex-row items-center">
                    <ul class="inline-block w-1/2 list-none ml-0 pl-4" id="adventures_overview">
                        {% for name, levels in adventures.items() %}
                            {% for level in levels %}
                                <li {% if level != 1 %} class="hidden" {% endif %} level="{{level}}" id="{{adventure_id}}">
                                    <input type="checkbox" name="adventures" class="mr-4" value="">
                                    <label style>{{ name }}</label>
                                </li>
                            {% endfor %}
                        {% endfor %}
                    </ul>
                    </div>
                </form>
            </div>
            <div id="other_settings">
                <h4>Overige instellingen</h4>
                <div class="mb-4">
                    <label class="inline-block w-1/2" for="attempts">Aantal example programs</label><input class="inline-block w-1/2 px-2 py-1 border-2 border-gray-400" id="attempts" name="attempts" value="5" type="number">
                </div>
                <div class="mb-4">
                    <label class="inline-block w-1/2" for="progress">Aantal volgend level</label><input class="inline-block w-1/2 px-2 py-1 border-2 border-gray-400" id="progress" name="progress" value="5" type="number">
                </div>
                <div class="mb-4">
                    <label class="inline-block w-1/2" for="hide_level">Level verbergen?</label><input type="checkbox" id="hide_level" name="hide_level" value="">
                </div>
            </div>
        </div>
        <div class="mt-4">
            <button class="blue-btn" onclick="hedyApp.save_level_settings ()">Opslaan</button>
            <button class="red-btn" onclick="hedyApp.reset_level_preferences ()">Reset level</button>
        </div>
    </div>
</div>
<script>
    $('#customize_level_button_container button').click(function(){
        let level = this.getAttribute('level');
        $('#level_settings').hide();
        $('#settings_header').text("Instellingen level " + level);
        $('#adventures_overview li').each(function(index, value) {
            $(this).hide();
            if (this.getAttribute('level') == level) {
                $(this).show();
            }
        });
        $('#level_settings').show();
    });
</script>
{% endblock %}
