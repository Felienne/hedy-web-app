{% extends "auth.html" %}

{% block regular_content %}
<div>
    <div class="flex relative">
        <div class="mx-auto "><h1>Class: {{ class_info.name }}</h1></div>
        <button class="green-btn ml-auto" id="to_class_button"
                onclick="window.location.href='/for-teachers/class/{{class_info.id}}'">
          {{_('back_to_class')}}
        </button>
    </div>

    <div class="flex pt-2">
        <button class="green-btn ml-auto"
                onclick="hedyApp.loadQuizChart({{ class_info.levels }}, {{ class_info.students }})">
            Load quiz data
        </button>
    </div>

    <div class="shadow-md stats mt-4 p-2">
        <div id="wrapper-static-student-tile" class="flex flex-wrap justify-center">
            {% for student in class_info.students %}
                <div class="w-1/3 mb-4">
                    <div class="group student-tile shadow cursor-pointer border px-6 py-2 ml-4 mr-4 mt-4
                    transition-all duration-500 ease-in-out hover:bg-green-400 hover:text-white"
                         onclick="hedyApp.studentTileChartClicked(event, {{ student|tojson }}, {{ class_info.levels }}, {{ student.success_runs_per_level }}, {{ student.error_runs_per_level }})">
                        <p id="static-student-name" class="select-none font-bold text-lg">{{ student.username }}</p>
                        <p class="select-none">Overall success rate: {{ student.success_rate_overall }}%</p>
                        <p class="select-none">Highest level achieved: {{ student.highest_level_quiz }}</p>
                        <p class="select-none">Quiz score ({{ student.highest_level_quiz }}): {{ student.highest_level_quiz_score }}%</p>
                        <p class="select-none">Success rate ({{ student.highest_level_quiz }}): {{ student.success_rate_highest_level }}%</p>
                    </div>
                    <div class="shadow border px-6 py-2 ml-4 mr-4">
                        <details>
                            <summary>Toggle Student Quiz Data</summary>
                            <div id="static-student-tile-{{ student.username }}" class="w-88 h-64">
                                <canvas id="canvas-{{ student.username }}" width="350" height="250"></canvas>
                            </div>
                        </details>
                    </div>
                </div>
            {% endfor %}
        </div>
        <hr class="border border-black text-gray-300 mt-4">
        <div id="expanded-student-tile" class="hidden w-3/4 shadow-2xl border p-2 mt-8 mx-auto rounded-lg">
            <p id="student-name" class="font-bold text-lg"></p>
            <canvas id="student-progression-chart"></canvas>
        </div>
    </div>
</div>
{% endblock %}
