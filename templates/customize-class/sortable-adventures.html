{% block main_content %}
<div class="flex flex-col mt-2 border border-gray-400 rounded-lg" hx-target="this" hx-swap="outerHTML settle:0.5s">
    <h3 class="px-4">{{_('select_adventures')}}</h3>
    <div id="level-state-accessible" class="leading-6 ml-4 rounded-lg bg-gray-200 pt-1 pb-1 pl-2 pr-2 w-fit hidden">
        <span>Level accessible</span>
    </div>
    <div id="level-state-disabled" class="leading-6 ml-4 rounded-lg bg-gray-400 pt-1 pb-1 pl-2 pr-2 w-fit hidden">
        <span>Level disabled</span>
    </div>
    <div id="level-state-future" class="leading-6 ml-4 rounded-lg bg-green-300 pt-1 pb-1 pl-2 pr-2 w-fit hidden">
        <span>Level opens on</span>
        <span id="opening_date"></span>
    </div>
    <div class="flex flex-row w-full mb-4">
        <div class="flex flex-row items-center justify-center mr-2 w-1/12 ml-4">
            <select class="py-2 px-1 mt-2 h-10 text-center w-full" name="levels" id="levels-dropdown"
                data-cy="adventures">
                {% for i in range(1, max_level + 1) %}
                <option id="select-{{i}}" value="{{ i }}" {% if i|string == level %} selected {% endif %} hx-get="/for-teachers/change-level?level={{i}}&class_id={{class_id}}">
                    {{ _('level_title') }} {{ i }}
                </option>
                {% endfor %}
            </select>
        </div>
        <div id="sortadventures" data-cy="sortadventures" class="flex flex-row w-9/12">
           
            {% if customizations and customizations['sorted_adventures'] %}                
                <div id="level-{{ level }}" data-cy="level-{{ level }}" class="adventures-tab flex sortable">
                    {% for adventure in customizations['sorted_adventures'][level|string] %}
                        {% if adventure.name in adventure_names %}
                            {# Note: this code is copy/pasted in teachers.ts. If you change it here, also change it there #}
                            <div draggable="true" class="tab {% if adventure['from_teacher'] %}teacher_tab{% endif %} z-10 whitespace-nowrap flex items-center justify-left relative" tabindex="0" adventure="{{ adventure['name'] }}" level="{{ level }}" from-teacher = "{% if adventure['from_teacher'] %}true{% else %}false{% endif %}">
                                <span class="absolute top-0.5 right-0.5 text-gray-600 hover:text-red-400 fa-regular fa-circle-xmark" data-cy="hide"></span>
                                {{ adventure_names[adventure['name']] }}
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>                
            {% else %}                
                <div id="level-{{ level }}" data-cy="level-{{ level }}" class="adventures-tab flex">
                    {% for adventure in adventures_default_order[level] %}
                        <div draggable="true" class="tab z-10 whitespace-nowrap flex items-center justify-left relative" tabindex="0" adventure="{{ adventure }}" level = "{{ level }}" from-teacher = "false">
                            <span id="remove" class="absolute top-0.5 right-0.5 text-gray-600 hover:text-red-400 fa-regular fa-circle-xmark" data-cy="hide"></span>
                            {{ adventure_names[adventure] }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        <div class="flex flex-row justify-center items-center ml-2 w-2/12 mr-4">
            <select class="py-2 px-1 w-full mt-2 h-10 text-center" name="levels" id="available"
                data-cy="available_adventures_current_level">
                <option value="none" selected disabled>Adventures</option>
            </select>
            <button class="green-btn w-1/2 mt-2 ml-2"><i class="fa-solid fa-plus"></i></button>
        </div>
    </div>
</div>
{% endblock %}