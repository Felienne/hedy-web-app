{% extends "class-live-stats.html" %}

{% block student_space %}

  <div class="justify-center pt-10 min-h-full">
      <h2 class="text-center">Student Details</h2>
      <div class="w-full max-w-8xl rounded-lg bg-blue-200 shadow-lg" id="card-student-details">
        <a class="no-underline float-right p-2" href="/live_stats/class/{{class_info.id}}">‚ùå</a>
        <!-- Title columns -->
        <div class="m-auto ml-14 flex pt-4 pl-4">
            <table class="text-left table-auto">
                <thead>
                    <tr>
                        <th class="w-64 text-blue-600">{{_('name')}}</th>
                        <th class="w-64 text-blue-600">{{_('level')}}</th>
                        <th class="w-64 text-blue-600">{{_('adventure')}}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>{{student.username}}</td>
                        {% if student_programs %}
                        <td>{{_('level')}} {{ student_programs[0].level }}</td>
                        <td>{{adventure_names.get(student_programs[0].adventure_name)}}</td>
                        {% else %}
                        <td>{{_('empty')}}</td>
                        <td>{{_('empty')}}</td>
                        {% endif %}
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Content -->
        <div class="grid grid-cols-3 p-5">
        <!-- Graph with fails and successful runs -->
            <div class="w-full text-center" id="runs-over-time">
                <h5 class="font-normal pb-1">Runs over time</h5>
                <div class="flex justify-center"><img class="p-2" src="/images/new_media_lab/runs-over-time.png"></div>
            </div>

            <!-- Last ran code -->
            <div class="w-full text-center turn-pre-into-ace mb-4">
                <h5 class="font-normal pb-1">Last program</h5>
                {% if student_programs %}
                    <pre level="{{ student_programs[0].level }}">{{student_programs[0].code }}</pre>
                {% else %}
                    <p>No program run yet</p>
                {% endif %}
            </div>

            <!-- Last error message  -->
            <div class="w-full text-center" id="last-error">
                <h5 class="font-normal pb-1">Last error</h5>
                <div class="flex justify-center">
                {% if student_programs and student_programs[0].error_message %}
                <p>{{ student_programs[0].error_message }}</p>
                {% endif %}
                </div>
            </div>
        </div>
      </div>
  </div>

{% endblock %}
